<h1>Editing notice</h1>

<% form_for(@notice) do |f| %>
  <%= f.error_messages %>

  <p>
    <%= f.label :is_sticky %><br />
    <%= f.check_box :is_sticky %>
  </p>
  <p>
    <%= f.label :content %><br />
    <%= f.text_area :content %>
  </p>
  <p>
    <%= f.label :start_time %><br />
    <%= f.datetime_select :start_time %>
  </p>
  <p>
    <%= f.label :end_time %><br />
    <%= f.datetime_select :end_time %>
  </p>
  <p>
    Display for users:<br />
    <%= f.text_field :for_users, :default => (@notice.viewers.collect {|v| v.name}).join("<br />") %>
  </p>
  <%#= f.check_box :department %><%= @department.name %> (department-wide)<br />
    <br/>
    <% for loc_group in @loc_groups do %>
    &nbsp;&nbsp;&nbsp;
    <%= check_box_tag "for_location_groups[]", loc_group.id, @notice.display_locations.include?(loc_group.locations), :disabled => false %><%= loc_group.name %><br />
    <% for location in loc_group.locations do %>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <%= check_box_tag "for_locations[]", location.id, @notice.display_locations.include?(location.id), :disabled => false %><%= location.name %><br />
    <% end %>
  <% end %>
  <p>
    <%= f.submit 'Update' %>
  </p>
<% end %>

<%= link_to 'Show', @notice %> |
<%= link_to 'Back', notices_path %>

